<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>libnxter: Vehicle.nxc File Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.6 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>Vehicle.nxc File Reference</h1>A simple 2 wheels drive vehicle implementation that can travel a set of navigation points. <a href="#_details">More...</a>
<p>
<code>#include &quot;<a class="el" href="_debug_8nxc-source.html">Debug.nxc</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="_angle_8nxc-source.html">Angle.nxc</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="_vector_8nxc-source.html">Vector.nxc</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="_circle_8nxc-source.html">Circle.nxc</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="_odometer2_8nxc-source.html">Odometer2.nxc</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="_motor_8nxc-source.html">Motor.nxc</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="_robot_prima_8nxc-source.html">RobotPrima.nxc</a>&quot;</code><br>

<p>
<div class="dynheader">
Include dependency graph for Vehicle.nxc:</div>
<div class="dynsection">
<p><center><img src="_vehicle_8nxc__incl.png" border="0" usemap="#Vehicle.nxc_map" alt=""></center>
<map name="Vehicle.nxc_map">
<area shape="rect" href="_debug_8nxc.html" title="Debugging utility macros." alt="" coords="197,453,280,480"><area shape="rect" href="_angle_8nxc.html" title="Provides simple arithmetic for absolute and relative angles." alt="" coords="147,229,227,256"><area shape="rect" href="_vector_8nxc.html" title="A simple 3&#45;components vector implementation (2D point + direction)." alt="" coords="324,304,407,331"><area shape="rect" href="_circle_8nxc.html" title="Circle geometry operations." alt="" coords="43,229,123,256"><area shape="rect" href="_odometer2_8nxc.html" title="Implements odometery for 2 wheels drive robot base using motor tachometers." alt="" coords="265,80,375,107"><area shape="rect" href="_motor_8nxc.html" title="Motor control implementation." alt="" coords="417,80,497,107"><area shape="rect" href="_robot_prima_8nxc.html" title="An experimental robotic platform for developing this library." alt="" coords="521,80,636,107"><area shape="rect" href="_matrix_8nxc.html" title="Integer matrix implementation. Provides matrix algebra, cofactor, adjugate and inverse..." alt="" coords="352,379,435,405"><area shape="rect" href="_map_8nxc.html" title="A 2D map implementation that holds a set of landmark objects." alt="" coords="307,155,379,181"><area shape="rect" href="_screen_8nxc.html" title="Display functions for text and graphs." alt="" coords="453,229,541,256"><area shape="rect" href="_p_i_d_8nxc.html" title="Generic PID controller implementation." alt="" coords="504,155,571,181"></map>
</div>

<p>
<div class="dynheader">
This graph shows which files directly or indirectly include this file:</div>
<div class="dynsection">
<p><center><img src="_vehicle_8nxc__dep__incl.png" border="0" usemap="#Vehicle.nxcdep_map" alt=""></center>
<map name="Vehicle.nxcdep_map">
<area shape="rect" href="_example_8nxc-source.html" title="Example.nxc" alt="" coords="5,80,101,107"></map>
</div>

<p>
<a href="_vehicle_8nxc-source.html">Go to the source code of this file.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Data Structures</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_vehicle.html">Vehicle</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight"><a class="el" href="struct_vehicle.html" title="Vehicle class representing a 2 wheels drive vehicle.">Vehicle</a> class representing a 2 wheels drive vehicle.  <a href="struct_vehicle.html#_details">More...</a><br></td></tr>
<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="844445b89bc7e234e7d7aab66651a9c7"></a><!-- doxytag: member="Vehicle.nxc::VehicleInit" ref="844445b89bc7e234e7d7aab66651a9c7" args="(Vehicle &amp;vehicle, Odometer2 &amp;odometer, int maxNavPoints)" -->
void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_vehicle_8nxc.html#844445b89bc7e234e7d7aab66651a9c7">VehicleInit</a> (<a class="el" href="struct_vehicle.html">Vehicle</a> &amp;vehicle, <a class="el" href="struct_odometer2.html">Odometer2</a> &amp;odometer, int maxNavPoints)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Initializes <a class="el" href="struct_vehicle.html" title="Vehicle class representing a 2 wheels drive vehicle.">Vehicle</a> with the given odometer and maximum amount of navigation points internal queue should hold. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_vehicle_8nxc.html#084033e6039f044acfb20cdd16090d7b">VehicleSetDynamics</a> (<a class="el" href="struct_vehicle.html">Vehicle</a> &amp;vehicle, int minPower, int maxPower, int powerAtSteer, int steerAtPower, int maxSteerFactor)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Sets the dynamics of the vehicle.  <a href="#084033e6039f044acfb20cdd16090d7b"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_vehicle_8nxc.html#9859d7c348138183be0eec077cb9980b">VehicleSetAcceleration</a> (<a class="el" href="struct_vehicle.html">Vehicle</a> &amp;vehicle, int accelerationPerStep, int brakingPerStep)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Sets the acceleration and braking rate of the vehicle.  <a href="#9859d7c348138183be0eec077cb9980b"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_vehicle_8nxc.html#5f3938033bd5cdc19ac2fb4703229c00">VehicleSetLookaheadDistance</a> (<a class="el" href="struct_vehicle.html">Vehicle</a> &amp;vehicle, int lookaheadDistance)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Sets the look ahead distance of the vehicle.  <a href="#5f3938033bd5cdc19ac2fb4703229c00"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="73a2c1529c6495527429c2317398d62d"></a><!-- doxytag: member="Vehicle.nxc::VehiclePause" ref="73a2c1529c6495527429c2317398d62d" args="(Vehicle &amp;vehicle)" -->
void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_vehicle_8nxc.html#73a2c1529c6495527429c2317398d62d">VehiclePause</a> (<a class="el" href="struct_vehicle.html">Vehicle</a> &amp;vehicle)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Pauses the vehicle. The pause is in effect immediately. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="55ba0367c29ed603dad141574b454a80"></a><!-- doxytag: member="Vehicle.nxc::VehicleContinue" ref="55ba0367c29ed603dad141574b454a80" args="(Vehicle &amp;vehicle)" -->
void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_vehicle_8nxc.html#55ba0367c29ed603dad141574b454a80">VehicleContinue</a> (<a class="el" href="struct_vehicle.html">Vehicle</a> &amp;vehicle)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Continues the vehicle. The continue is in effect immediately and will start accelerating from next step on wards. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="77057987ca5fc2fcc5ef324bf585f432"></a><!-- doxytag: member="Vehicle.nxc::VehicleAddNavPoint" ref="77057987ca5fc2fcc5ef324bf585f432" args="(Vehicle &amp;vehicle, Vector &amp;navPoint)" -->
void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_vehicle_8nxc.html#77057987ca5fc2fcc5ef324bf585f432">VehicleAddNavPoint</a> (<a class="el" href="struct_vehicle.html">Vehicle</a> &amp;vehicle, <a class="el" href="struct_vector.html">Vector</a> &amp;navPoint)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Adds a navigation point to the internal queue. The navigation point is appended to the queue so that it is executed after existing navigation points. Navigation points vectors in cm. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="caf2b9d25cae8cd8639b4c35ea42cddc"></a><!-- doxytag: member="Vehicle.nxc::VehicleAddNavPoints" ref="caf2b9d25cae8cd8639b4c35ea42cddc" args="(Vehicle &amp;vehicle, Vector &amp;navPoints[])" -->
void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_vehicle_8nxc.html#caf2b9d25cae8cd8639b4c35ea42cddc">VehicleAddNavPoints</a> (<a class="el" href="struct_vehicle.html">Vehicle</a> &amp;vehicle, <a class="el" href="struct_vector.html">Vector</a> &amp;navPoints[])</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Adds a set of navigation points to the internal queue. The points are appended to the queue so that they are executed after existing navigation points. Navigation points vectors in cm. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">long&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_vehicle_8nxc.html#049e3c80f92425f419255b89da173cce">VehicleSteerToAngle</a> (<a class="el" href="struct_vehicle.html">Vehicle</a> &amp;vehicle, int approachAngle)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Steers the vehicle by the give approachAngle. Positive angle would turn the vehicle anti-clockwise and negative angle would turn it clockwise.  <a href="#049e3c80f92425f419255b89da173cce"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_vehicle_8nxc.html#31f852545f169d0a2c9bae2d5d0e2e3f">VehicleUpdatePowerAndSteer</a> (<a class="el" href="struct_vehicle.html">Vehicle</a> &amp;vehicle, int requestedSteerFactor)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Updates both current power and current steering of the vehicle based on the requested steering factor.  <a href="#31f852545f169d0a2c9bae2d5d0e2e3f"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="8e7f29868ea06be26a49ab3ef0f87f7b"></a><!-- doxytag: member="Vehicle.nxc::LineProjectPoint" ref="8e7f29868ea06be26a49ab3ef0f87f7b" args="(Vector a, Vector b, Vector p, Vector &amp;ret)" -->
void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_vehicle_8nxc.html#8e7f29868ea06be26a49ab3ef0f87f7b">LineProjectPoint</a> (<a class="el" href="struct_vector.html">Vector</a> a, <a class="el" href="struct_vector.html">Vector</a> b, <a class="el" href="struct_vector.html">Vector</a> p, <a class="el" href="struct_vector.html">Vector</a> &amp;ret)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Determines the perpendicular drop of point p on the line given by points a and b. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_vehicle_8nxc.html#61b9d038118212c772f1cc5aeef4c464">VehicleGetLookahead</a> (<a class="el" href="struct_vehicle.html">Vehicle</a> &amp;vehicle, <a class="el" href="struct_vector.html">Vector</a> &amp;lookahead)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Determines the current lookahead point of the vehicle.  <a href="#61b9d038118212c772f1cc5aeef4c464"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_vehicle_8nxc.html#bf5878544d17aae0dc4c7a17a65f4082">VehicleStep</a> (<a class="el" href="struct_vehicle.html">Vehicle</a> &amp;vehicle)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight"><a class="el" href="struct_vehicle.html" title="Vehicle class representing a 2 wheels drive vehicle.">Vehicle</a> execution step funtion.  <a href="#bf5878544d17aae0dc4c7a17a65f4082"></a><br></td></tr>
</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
A simple 2 wheels drive vehicle implementation that can travel a set of navigation points. 
<p>
It contains a pair of differential motors (independently controlled), uses odometry to position itself in 2D plane and a set of defined navigation points. The navigation points can be dynamically changed during run time. All vectors operated in <a class="el" href="struct_vehicle.html" title="Vehicle class representing a 2 wheels drive vehicle.">Vehicle</a> are in centimeters (cm). 
<p>Definition in file <a class="el" href="_vehicle_8nxc-source.html">Vehicle.nxc</a>.</p>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="61b9d038118212c772f1cc5aeef4c464"></a><!-- doxytag: member="Vehicle.nxc::VehicleGetLookahead" ref="61b9d038118212c772f1cc5aeef4c464" args="(Vehicle &amp;vehicle, Vector &amp;lookahead)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool VehicleGetLookahead           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_vehicle.html">Vehicle</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>vehicle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_vector.html">Vector</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>lookahead</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Determines the current lookahead point of the vehicle. 
<p>
Look ahead point is a point 'look ahead' distance away from the vehicle that intersects with the next path that vehicle is supposed to follow. 'Next path' is the path denoted by the line from last visited navigation point to the currently targeted navigation point. If there is no intersection (that is, vehicle is off the path too much) it uses the closest point (within the circle) to the path. 
<p>Definition at line <a class="el" href="_vehicle_8nxc-source.html#l00336">336</a> of file <a class="el" href="_vehicle_8nxc-source.html">Vehicle.nxc</a>.</p>

<p>References <a class="el" href="_circle_8nxc-source.html#l00099">CircleIntersectLine()</a>, <a class="el" href="_vehicle_8nxc-source.html#l00070">Vehicle::lastMoveVector</a>, <a class="el" href="_vehicle_8nxc-source.html#l00316">LineProjectPoint()</a>, <a class="el" href="_vehicle_8nxc-source.html#l00069">Vehicle::lookaheadDistance</a>, <a class="el" href="_vehicle_8nxc-source.html#l00066">Vehicle::navPoint</a>, <a class="el" href="_vehicle_8nxc-source.html#l00067">Vehicle::navPointLast</a>, <a class="el" href="_vehicle_8nxc-source.html#l00065">Vehicle::navPointsQueue</a>, <a class="el" href="_vehicle_8nxc-source.html#l00064">Vehicle::odometer</a>, <a class="el" href="_odometer2_8nxc-source.html#l00208">Odometer2GetCumulativePosition()</a>, <a class="el" href="_vector_8nxc-source.html#l00100">VectorGetDistanceVec()</a>, and <a class="el" href="_vector_8nxc-source.html#l00201">VectorReduce()</a>.</p>

<p>Referenced by <a class="el" href="_vehicle_8nxc-source.html#l00384">VehicleStep()</a>.</p>

</div>
</div><p>
<a class="anchor" name="9859d7c348138183be0eec077cb9980b"></a><!-- doxytag: member="Vehicle.nxc::VehicleSetAcceleration" ref="9859d7c348138183be0eec077cb9980b" args="(Vehicle &amp;vehicle, int accelerationPerStep, int brakingPerStep)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void VehicleSetAcceleration           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_vehicle.html">Vehicle</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>vehicle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>accelerationPerStep</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>brakingPerStep</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Sets the acceleration and braking rate of the vehicle. 
<p>
When vehicle needs acceleration or braking, accelerationPerStep or brakingPerStep will be used to increase or reduce the power per step. 
<p>Definition at line <a class="el" href="_vehicle_8nxc-source.html#l00127">127</a> of file <a class="el" href="_vehicle_8nxc-source.html">Vehicle.nxc</a>.</p>

<p>References <a class="el" href="_vehicle_8nxc-source.html#l00056">Vehicle::accelPower</a>, and <a class="el" href="_vehicle_8nxc-source.html#l00057">Vehicle::brakePower</a>.</p>

</div>
</div><p>
<a class="anchor" name="084033e6039f044acfb20cdd16090d7b"></a><!-- doxytag: member="Vehicle.nxc::VehicleSetDynamics" ref="084033e6039f044acfb20cdd16090d7b" args="(Vehicle &amp;vehicle, int minPower, int maxPower, int powerAtSteer, int steerAtPower, int maxSteerFactor)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void VehicleSetDynamics           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_vehicle.html">Vehicle</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>vehicle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>minPower</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>maxPower</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>powerAtSteer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>steerAtPower</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>maxSteerFactor</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Sets the dynamics of the vehicle. 
<p>
minPower is the minimum power that the vehicle should maintain as long as it has navigation paths to follow. maxPower is the maximum power the vehicle is allowed to take. powerAtSteer and steerAtPower are one power and steering factor (respectively) combination found in inverse relationship of power and steering factor funtion. This is used to determine stability factor of the vehicle. maxSteerFactor is the maximum steering factor allowed to take by the vehicle. 
<p>Definition at line <a class="el" href="_vehicle_8nxc-source.html#l00112">112</a> of file <a class="el" href="_vehicle_8nxc-source.html">Vehicle.nxc</a>.</p>

<p>References <a class="el" href="_vehicle_8nxc-source.html#l00054">Vehicle::maxPower</a>, <a class="el" href="_vehicle_8nxc-source.html#l00059">Vehicle::maxSteerFactor</a>, <a class="el" href="_vehicle_8nxc-source.html#l00055">Vehicle::minPower</a>, and <a class="el" href="_vehicle_8nxc-source.html#l00061">Vehicle::stabilityFactor</a>.</p>

</div>
</div><p>
<a class="anchor" name="5f3938033bd5cdc19ac2fb4703229c00"></a><!-- doxytag: member="Vehicle.nxc::VehicleSetLookaheadDistance" ref="5f3938033bd5cdc19ac2fb4703229c00" args="(Vehicle &amp;vehicle, int lookaheadDistance)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void VehicleSetLookaheadDistance           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_vehicle.html">Vehicle</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>vehicle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>lookaheadDistance</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Sets the look ahead distance of the vehicle. 
<p>
The vehicle implements 'carrot following' algorithm for path following. Look ahead distance is the distance of the carrot from vehicle to determine look ahead point (carrot). 
<p>Definition at line <a class="el" href="_vehicle_8nxc-source.html#l00141">141</a> of file <a class="el" href="_vehicle_8nxc-source.html">Vehicle.nxc</a>.</p>

<p>References <a class="el" href="_vehicle_8nxc-source.html#l00069">Vehicle::lookaheadDistance</a>.</p>

</div>
</div><p>
<a class="anchor" name="049e3c80f92425f419255b89da173cce"></a><!-- doxytag: member="Vehicle.nxc::VehicleSteerToAngle" ref="049e3c80f92425f419255b89da173cce" args="(Vehicle &amp;vehicle, int approachAngle)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">long VehicleSteerToAngle           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_vehicle.html">Vehicle</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>vehicle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>approachAngle</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Steers the vehicle by the give approachAngle. Positive angle would turn the vehicle anti-clockwise and negative angle would turn it clockwise. 
<p>
This is a direct in-place turn and motors will be stopped after the turn. It uses PID control to make the turn. 
<p>Definition at line <a class="el" href="_vehicle_8nxc-source.html#l00212">212</a> of file <a class="el" href="_vehicle_8nxc-source.html">Vehicle.nxc</a>.</p>

<p>References <a class="el" href="_odometer2_8nxc-source.html#l00052">Odometer2::axialLength</a>, <a class="el" href="_odometer2_8nxc-source.html#l00053">Odometer2::gearRatio</a>, <a class="el" href="_vehicle_8nxc-source.html#l00054">Vehicle::maxPower</a>, <a class="el" href="_vehicle_8nxc-source.html#l00062">Vehicle::motorLeft</a>, <a class="el" href="_vehicle_8nxc-source.html#l00063">Vehicle::motorRight</a>, <a class="el" href="_motor_8nxc-source.html#l00211">MotorRotateAngleDiff()</a>, <a class="el" href="_vehicle_8nxc-source.html#l00064">Vehicle::odometer</a>, <a class="el" href="_odometer2_8nxc-source.html#l00093">Odometer2Step()</a>, and <a class="el" href="_odometer2_8nxc-source.html#l00051">Odometer2::wheelDiameter</a>.</p>

</div>
</div><p>
<a class="anchor" name="bf5878544d17aae0dc4c7a17a65f4082"></a><!-- doxytag: member="Vehicle.nxc::VehicleStep" ref="bf5878544d17aae0dc4c7a17a65f4082" args="(Vehicle &amp;vehicle)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int VehicleStep           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_vehicle.html">Vehicle</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>vehicle</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<a class="el" href="struct_vehicle.html" title="Vehicle class representing a 2 wheels drive vehicle.">Vehicle</a> execution step funtion. 
<p>
Call this at regular interval (not necessarily with the same interval period). 30 to 150 ms is a good choice. This will execute vehicle commands required to move it through the series of navigation points. Each step is a minuscle operation to correct the drive operations. 
<p>Definition at line <a class="el" href="_vehicle_8nxc-source.html#l00384">384</a> of file <a class="el" href="_vehicle_8nxc-source.html">Vehicle.nxc</a>.</p>

<p>References <a class="el" href="_angle_8nxc-source.html#l00076">AngleAbsSub()</a>, <a class="el" href="_angle_8nxc-source.html#l00044">AngleAbsToRel()</a>, <a class="el" href="_vehicle_8nxc-source.html#l00070">Vehicle::lastMoveVector</a>, <a class="el" href="_vehicle_8nxc-source.html#l00069">Vehicle::lookaheadDistance</a>, <a class="el" href="_vehicle_8nxc-source.html#l00059">Vehicle::maxSteerFactor</a>, <a class="el" href="_vehicle_8nxc-source.html#l00062">Vehicle::motorLeft</a>, <a class="el" href="_vehicle_8nxc-source.html#l00063">Vehicle::motorRight</a>, <a class="el" href="_motor_8nxc-source.html#l00088">MotorStopSync()</a>, <a class="el" href="_vehicle_8nxc-source.html#l00066">Vehicle::navPoint</a>, <a class="el" href="_vehicle_8nxc-source.html#l00067">Vehicle::navPointLast</a>, <a class="el" href="_vehicle_8nxc-source.html#l00065">Vehicle::navPointsQueue</a>, <a class="el" href="_vehicle_8nxc-source.html#l00064">Vehicle::odometer</a>, <a class="el" href="_odometer2_8nxc-source.html#l00208">Odometer2GetCumulativePosition()</a>, <a class="el" href="_odometer2_8nxc-source.html#l00093">Odometer2Step()</a>, <a class="el" href="_vehicle_8nxc-source.html#l00071">Vehicle::pause</a>, <a class="el" href="_vector_8nxc-source.html#l00047">Vector::theta</a>, <a class="el" href="_vector_8nxc-source.html#l00110">VectorGetAngleVec()</a>, <a class="el" href="_vector_8nxc-source.html#l00100">VectorGetDistanceVec()</a>, <a class="el" href="_vector_8nxc-source.html#l00201">VectorReduce()</a>, <a class="el" href="_vehicle_8nxc-source.html#l00336">VehicleGetLookahead()</a>, and <a class="el" href="_vehicle_8nxc-source.html#l00239">VehicleUpdatePowerAndSteer()</a>.</p>

</div>
</div><p>
<a class="anchor" name="31f852545f169d0a2c9bae2d5d0e2e3f"></a><!-- doxytag: member="Vehicle.nxc::VehicleUpdatePowerAndSteer" ref="31f852545f169d0a2c9bae2d5d0e2e3f" args="(Vehicle &amp;vehicle, int requestedSteerFactor)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void VehicleUpdatePowerAndSteer           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_vehicle.html">Vehicle</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>vehicle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>requestedSteerFactor</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Updates both current power and current steering of the vehicle based on the requested steering factor. 
<p>
<a class="el" href="struct_vehicle.html" title="Vehicle class representing a 2 wheels drive vehicle.">Vehicle</a> may not get the requested steering if the current power is too high for it. It will instead try to slow down to the power level where this steering is possible. On the other hand if requested steering is low for the current power, it will try to accelarate the vehicle. The stable and safe steering factor at a given power is computate as an inverse function -- that is, higher the power, lower the allowable steering factor. The constant in this function is the 'stability factor'. The vehicle always try to keep the set minimum power to motors as long as it is traveling, and maximum power as long as it is going straight. Between the two extremes, the vehicle will accelerate or decelarate depending on the steering needs. 
<p>Definition at line <a class="el" href="_vehicle_8nxc-source.html#l00239">239</a> of file <a class="el" href="_vehicle_8nxc-source.html">Vehicle.nxc</a>.</p>

<p>References <a class="el" href="_vehicle_8nxc-source.html#l00056">Vehicle::accelPower</a>, <a class="el" href="_vehicle_8nxc-source.html#l00057">Vehicle::brakePower</a>, <a class="el" href="_vehicle_8nxc-source.html#l00058">Vehicle::currentPower</a>, <a class="el" href="_vehicle_8nxc-source.html#l00060">Vehicle::currentSteerFactor</a>, <a class="el" href="_vehicle_8nxc-source.html#l00054">Vehicle::maxPower</a>, <a class="el" href="_vehicle_8nxc-source.html#l00059">Vehicle::maxSteerFactor</a>, <a class="el" href="_vehicle_8nxc-source.html#l00055">Vehicle::minPower</a>, <a class="el" href="_vehicle_8nxc-source.html#l00062">Vehicle::motorLeft</a>, <a class="el" href="_vehicle_8nxc-source.html#l00063">Vehicle::motorRight</a>, <a class="el" href="_motor_8nxc-source.html#l00124">MotorSetTurnRatioPower()</a>, and <a class="el" href="_vehicle_8nxc-source.html#l00061">Vehicle::stabilityFactor</a>.</p>

<p>Referenced by <a class="el" href="_vehicle_8nxc-source.html#l00384">VehicleStep()</a>.</p>

</div>
</div><p>
</div>
<hr size="1"><address style="text-align: right;"><small>Generated on Sat Jun 6 15:09:09 2009 for libnxter by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.6 </small></address>
</body>
</html>
